# دليل اختبار نظام المصادقة والبريد الإلكتروني

## 🎯 ما تم إصلاحه

### 1. مشكلة قاعدة البيانات
- تم إنشاء `MockAuthService` للعمل بدون قاعدة بيانات
- النظام يحاول استخدام MongoDB أولاً، ثم ينتقل للـ Mock service تلقائياً

### 2. مشكلة كلمة مرور البريد الإلكتروني
- تم إزالة المسافات من كلمة المرور: `hxigwtmkxdxtvqdy`
- تم تحديث الإعدادات الافتراضية في الكود

## 🧪 خطوات الاختبار

### الخطوة 1: تأكد من إعدادات البيئة
```bash
EMAIL_USER=yussef.ali.it@gmail.com
EMAIL_APP_PASSWORD=hxigwtmkxdxtvqdy
JWT_SECRET=mazoony-super-secret-jwt-key-for-development-testing-2024
NEXTAUTH_URL=http://localhost:3000
```

### الخطوة 2: تشغيل الخادم
الخادم يعمل الآن على: http://localhost:3000

### الخطوة 3: اختبار الصفحات

#### 🔐 تسجيل الدخول (Mock Data):
1. اذهب إلى: http://localhost:3000/login
2. جرب هذه البيانات:
   - **البريد**: `admin@mazoony.com`
   - **كلمة المرور**: `admin123`
   
   أو:
   - **البريد**: `yussef.ali.it@gmail.com`  
   - **كلمة المرور**: `test123`

#### 🔑 نسيان كلمة المرور:
1. اذهب إلى: http://localhost:3000/forgot-password
2. أدخل أي من البريدين أعلاه
3. **سيتم إرسال بريد إلكتروني حقيقي** إلى `yussef.ali.it@gmail.com`
4. ستحصل على رابط استعادة كلمة المرور

#### 🔄 إعادة تعيين كلمة المرور:
1. اضغط على الرابط المُرسل في البريد الإلكتروني
2. أو استخدم الرابط الذي يظهر في وحدة التحكم (للتطوير)
3. أدخل كلمة مرور جديدة
4. أكد كلمة المرور

## 📧 اختبار البريد الإلكتروني

### البرید المُرسل سيحتوي على:
- ✅ رابط إعادة تعيين كلمة المرور
- ✅ تصميم عربي احترافي
- ✅ تحذيرات أمنية (صالح لـ 15 دقيقة)
- ✅ رابط احتياطي
- ✅ معلومات الموقع

### إذا لم يصل البريد:
1. تحقق من مجلد البريد المزعج
2. تأكد من صحة كلمة مرور التطبيق
3. راجع Console للأخطاء

## 🔍 مراقبة الأخطاء

### في Console ستجد:
```
🔄 Database not available, using mock service for testing...
✅ تم إرسال البريد الإلكتروني بنجاح: <message-id>
🔄 Mock: تم إنشاء رمز الاستعادة: <token>
```

### إذا فشل البريد الإلكتروني:
```
❌ خطأ في إرسال البريد الإلكتروني: [تفاصيل الخطأ]
```

## 🎨 الميزات المتاحة

### الصفحات الجديدة:
1. **`/login`** - تسجيل دخول أنيق
2. **`/forgot-password`** - نسيان كلمة المرور
3. **`/reset-password`** - إعادة تعيين كلمة المرور

### Mock Users المتاحة:
```javascript
// Admin
email: 'admin@mazoony.com'
password: 'admin123'

// Your email
email: 'yussef.ali.it@gmail.com'
password: 'test123'
```

## 🚀 الخطوات التالية

### للانتقال للإنتاج:
1. **إعداد MongoDB Atlas** أو خادم MongoDB
2. **تحديث MONGODB_URI** في `.env.local`
3. **إزالة Mock Service** من APIs
4. **اختبار مع قاعدة البيانات الحقيقية**

### لإضافة مستخدمين جدد:
1. استخدم MongoDB
2. أو أضف للـ Mock Users في `lib/mock-auth.ts`

## ✅ النظام الآن يعمل!

- 🔐 تسجيل الدخول يعمل (Mock)
- 📧 إرسال البريد الإلكتروني يعمل (حقيقي)
- 🔑 استعادة كلمة المرور تعمل
- 🎨 التصميم جذاب ومتجاوب
- 🔒 الأمان محفوظ

**جرب النظام الآن!** 🎉
