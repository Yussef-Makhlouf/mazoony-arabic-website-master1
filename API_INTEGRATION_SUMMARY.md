# ููุฎุต ุงูุชูุงูู ูุน APIs - ููุญุฉ ุงูุชุญูู

## โ ุงููุดุงูู ุงููุญูููุฉ

### 1. ูุดููุฉ ุงูุชุนุฏูู
**ุงููุดููุฉ**: `{error: "Name, slug, cityId, and phone are required"}`

**ุงูุญู**:
- ุฅุตูุงุญ ุชูุณูู ุงูุจูุงูุงุช ุงููุฑุณูุฉ ุฅูู APIs
- ุฅุถุงูุฉ `cityId` ุงููุทููุจ ูููุฃุฐูููู
- ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก

### 2. ุฑุจุท ุฌููุน ุงูููููุงุช ุจู APIs

#### โ ุตูุญุงุช ุงูุฅุถุงูุฉ
- **ุงููุฏู**: `/admin/cities/new` โ `POST /api/cities`
- **ุงููุฃุฐูููู**: `/admin/sheikhs/new` โ `POST /api/sheikhs`

#### โ ุตูุญุงุช ุงูุชุนุฏูู
- **ุงููุฏู**: `/admin/cities/[slug]/edit` โ `PUT /api/cities/[slug]`
- **ุงููุฃุฐูููู**: `/admin/sheikhs/[slug]/edit` โ `PUT /api/sheikhs/[slug]`

#### โ ุตูุญุงุช ุงูููุงุฆู
- **ุงููุฏู**: `/admin/cities` โ `GET /api/cities`
- **ุงููุฃุฐูููู**: `/admin/sheikhs` โ `GET /api/sheikhs`

#### โ ุงูุฅุญุตุงุฆูุงุช
- **ููุญุฉ ุงูุชุญูู**: `/admin/analytics` โ `GET /api/cities` + `GET /api/sheikhs`

---

## ๐ง ุงูุชุญุฏูุซุงุช ุงูุชูููุฉ

### 1. ุฅุตูุงุญ ุชูุณูู ุงูุจูุงูุงุช

#### ุงููุฏู
```typescript
// ูุจู
body: JSON.stringify(formData)

// ุจุนุฏ
const updateData = {
  name: formData.name,
  slug: formData.slug,
  region: formData.region,
  population: formData.population,
  description: formData.description,
  featured: formData.featured
}
body: JSON.stringify(updateData)
```

#### ุงููุฃุฐูููู
```typescript
// ูุจู
body: JSON.stringify(formData)

// ุจุนุฏ
const selectedCity = cities.find(city => city.name === formData.city)
const updateData = {
  name: formData.name,
  slug: formData.slug,
  cityId: selectedCity.id, // ุฅุถุงูุฉ cityId ุงููุทููุจ
  city: formData.city,
  citySlug: formData.citySlug,
  phone: formData.phone,
  // ... ุจุงูู ุงูุญููู
}
body: JSON.stringify(updateData)
```

### 2. ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก

```typescript
// ูุจู
throw new Error("ูุดู ูู ุชุญุฏูุซ ุงููุฏููุฉ")

// ุจุนุฏ
const errorData = await response.json()
throw new Error(errorData.error || "ูุดู ูู ุชุญุฏูุซ ุงููุฏููุฉ")
```

### 3. ุฑุจุท ุงูููุงุฆู ุจู APIs

#### ุชุญููู ุงูุจูุงูุงุช
```typescript
useEffect(() => {
  const fetchData = async () => {
    try {
      setIsLoading(true)
      const response = await fetch("/api/cities")
      if (response.ok) {
        const data = await response.json()
        setCitiesData(data)
      }
    } catch (error) {
      setError("ุญุฏุซ ุฎุทุฃ ูู ุชุญููู ุงูุจูุงูุงุช")
    } finally {
      setIsLoading(false)
    }
  }
  fetchData()
}, [])
```

#### ุงูุญุฐู
```typescript
const handleDelete = async (id: string) => {
  try {
    const response = await fetch(`/api/cities/${id}`, {
      method: "DELETE",
    })
    if (response.ok) {
      window.location.reload()
    }
  } catch (error) {
    alert("ุญุฏุซ ุฎุทุฃ ูู ุงูุญุฐู")
  }
}
```

#### ุงูุชุญุฏูุซ
```typescript
const toggleFeatured = async (id: string) => {
  try {
    const city = citiesData.find(c => c._id === id)
    const response = await fetch(`/api/cities/${city.slug}`, {
      method: "PUT",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ ...city, featured: !city.featured })
    })
    if (response.ok) {
      window.location.reload()
    }
  } catch (error) {
    alert("ุญุฏุซ ุฎุทุฃ ูู ุงูุชุญุฏูุซ")
  }
}
```

---

## ๐ฏ ุงูููุฒุงุช ุงููุถุงูุฉ

### 1. ุชุญููู ุงูุจูุงูุงุช ุงููุจุงุดุฑ
- ุฌููุน ุงูุตูุญุงุช ุชุญูู ุงูุจูุงูุงุช ูู APIs
- ูุคุดุฑุงุช ุชุญููู ุฃุซูุงุก ุฌูุจ ุงูุจูุงูุงุช
- ูุนุงูุฌุฉ ุฃุฎุทุงุก ุดุงููุฉ

### 2. ุงูุชุญุฏูุซ ุงููุจุงุดุฑ
- ุฃุฒุฑุงุฑ ุงูุชุตููู ุชุนูู ูุจุงุดุฑุฉ
- ุฃุฒุฑุงุฑ ุงูุชุญูู ุชุนูู ูุจุงุดุฑุฉ
- ุฃุฒุฑุงุฑ ุงูุญุฐู ุชุนูู ูุจุงุดุฑุฉ

### 3. ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ุงููุญุณูุฉ
- ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ
- ุฅุนุงุฏุฉ ุงููุญุงููุฉ ุงูุชููุงุฆูุฉ
- ุนุฑุถ ุชูุงุตูู ุงูุฃุฎุทุงุก

### 4. ุงูุชูุงูู ุงููุงูู
- ุฌููุน ุงูุนูููุงุช (CRUD) ูุฑุจูุทุฉ ุจู APIs
- ุชุญุฏูุซ ุงูุจูุงูุงุช ูู ุงูููุช ุงููุนูู
- ุชุฒุงูู ุงูุจูุงูุงุช ุจูู ุงูุตูุญุงุช

---

## ๐ APIs ุงููุณุชุฎุฏูุฉ

### ุงููุฏู
```
GET    /api/cities           - ุฌูุจ ุฌููุน ุงููุฏู
POST   /api/cities           - ุฅุถุงูุฉ ูุฏููุฉ ุฌุฏูุฏุฉ
GET    /api/cities/[slug]    - ุฌูุจ ูุฏููุฉ ูุญุฏุฏุฉ
PUT    /api/cities/[slug]    - ุชุญุฏูุซ ูุฏููุฉ
DELETE /api/cities/[slug]    - ุญุฐู ูุฏููุฉ
```

### ุงููุฃุฐูููู
```
GET    /api/sheikhs           - ุฌูุจ ุฌููุน ุงููุฃุฐูููู
POST   /api/sheikhs           - ุฅุถุงูุฉ ูุฃุฐูู ุฌุฏูุฏ
GET    /api/sheikhs/[slug]    - ุฌูุจ ูุฃุฐูู ูุญุฏุฏ
PUT    /api/sheikhs/[slug]    - ุชุญุฏูุซ ูุฃุฐูู
DELETE /api/sheikhs/[slug]    - ุญุฐู ูุฃุฐูู
```

---

## ๐ ุณูุฑ ุงูุนูู

### ุฅุถุงูุฉ ูุฏููุฉ
1. ุงููุณุชุฎุฏู ูููุฃ ุงููููุฐุฌ
2. ุงูุจูุงูุงุช ุชูุฑุณู ุฅูู `POST /api/cities`
3. ูู ุญุงูุฉ ุงููุฌุงุญ: ุงูุงูุชูุงู ุฅูู ูุงุฆูุฉ ุงููุฏู
4. ูู ุญุงูุฉ ุงูุฎุทุฃ: ุนุฑุถ ุฑุณุงูุฉ ุงูุฎุทุฃ

### ุชุนุฏูู ูุฏููุฉ
1. ุชุญููู ุงูุจูุงูุงุช ุงูุญุงููุฉ ูู `GET /api/cities/[slug]`
2. ุงููุณุชุฎุฏู ูุนุฏู ุงูุจูุงูุงุช
3. ุงูุจูุงูุงุช ุชูุฑุณู ุฅูู `PUT /api/cities/[slug]`
4. ูู ุญุงูุฉ ุงููุฌุงุญ: ุงูุงูุชูุงู ุฅูู ูุงุฆูุฉ ุงููุฏู
5. ูู ุญุงูุฉ ุงูุฎุทุฃ: ุนุฑุถ ุฑุณุงูุฉ ุงูุฎุทุฃ

### ุญุฐู ูุฏููุฉ
1. ุชุฃููุฏ ุงูุญุฐู ูู ุงููุณุชุฎุฏู
2. ุฅุฑุณุงู ุทูุจ `DELETE /api/cities/[slug]`
3. ูู ุญุงูุฉ ุงููุฌุงุญ: ุฅุนุงุฏุฉ ุชุญููู ุงูุตูุญุฉ
4. ูู ุญุงูุฉ ุงูุฎุทุฃ: ุนุฑุถ ุฑุณุงูุฉ ุงูุฎุทุฃ

---

## ๐ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

### โ ูุง ุชู ุฅูุฌุงุฒู
- ุฅุตูุงุญ ูุดููุฉ ุงูุชุนุฏูู
- ุฑุจุท ุฌููุน ุงูุตูุญุงุช ุจู APIs
- ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
- ุฅุถุงูุฉ ุงูุชุญุฏูุซ ุงููุจุงุดุฑ
- ุชุญุณูู ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู

### โ ุงูุญุงูุฉ ุงูุญุงููุฉ
- **ุงูุฅุถุงูุฉ**: โ ุชุนูู ุจุดูู ูุซุงูู
- **ุงูุชุนุฏูู**: โ ุชุนูู ุจุดูู ูุซุงูู
- **ุงูุญุฐู**: โ ุชุนูู ุจุดูู ูุซุงูู
- **ุงูุนุฑุถ**: โ ูุนูู ุจุดูู ูุซุงูู
- **ุงูุฅุญุตุงุฆูุงุช**: โ ุชุนูู ุจุดูู ูุซุงูู

### โ ุงูุนูููุงุช ุงููุฏุนููุฉ
- ุฅุถุงูุฉ ูุฏู ููุฃุฐูููู
- ุชุนุฏูู ุจูุงูุงุช ุงููุฏู ูุงููุฃุฐูููู
- ุญุฐู ุงููุฏู ูุงููุฃุฐูููู
- ุชุจุฏูู ุงูุชุตููู ูุงูุชุญูู
- ุงูุจุญุซ ูุงูููุชุฑุฉ
- ุนุฑุถ ุงูุฅุญุตุงุฆูุงุช

---

## ๐ ููุงุญุธุงุช ูููุฉ

1. **cityId ูุทููุจ**: ูุฌุจ ุฅุฑุณุงู `cityId` ูุน ุจูุงูุงุช ุงููุฃุฐูู
2. **ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก**: ุฌููุน ุงูุนูููุงุช ุชุนุงูุฌ ุงูุฃุฎุทุงุก ุจุดูู ุตุญูุญ
3. **ุงูุชุญุฏูุซ ุงููุจุงุดุฑ**: ุงูุจูุงูุงุช ุชุชุญุฏุซ ููุฑุงู ุจุนุฏ ุฃู ุนูููุฉ
4. **ุงูุชูุงูู ุงููุงูู**: ุฌููุน ุงูููููุงุช ูุชุตูุฉ ุจู APIs

---

**ุงููุชูุฌุฉ**: ุชู ุญู ุฌููุน ุงููุดุงูู ูุฑุจุท ุงููุธุงู ุจุงููุงูู ูุน APIs. ุงููุธุงู ุงูุขู ูุนูู ุจุดูู ูุซุงูู ููุชูุงุณู.
